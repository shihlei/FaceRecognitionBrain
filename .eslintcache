[{"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/index.js":"1","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/reportWebVitals.js":"2","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/App.js":"3","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Navigation/Navigation.js":"4","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Logo/Logo.js":"5","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/ImageLinkForm/ImageLinkForm.js":"6","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Rank/Rank.js":"7","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/FaceRecognition/FaceRecognition.js":"8","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Signin/Signin.js":"9","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Register/Register.js":"10"},{"size":519,"mtime":1610983341833,"results":"11","hashOfConfig":"12"},{"size":362,"mtime":1610980993518,"results":"13","hashOfConfig":"12"},{"size":4803,"mtime":1616079729891,"results":"14","hashOfConfig":"12"},{"size":677,"mtime":1612078705481,"results":"15","hashOfConfig":"12"},{"size":436,"mtime":1611070808485,"results":"16","hashOfConfig":"12"},{"size":618,"mtime":1611394637166,"results":"17","hashOfConfig":"12"},{"size":257,"mtime":1615389171528,"results":"18","hashOfConfig":"12"},{"size":446,"mtime":1611478722615,"results":"19","hashOfConfig":"12"},{"size":2760,"mtime":1616079754284,"results":"20","hashOfConfig":"12"},{"size":2924,"mtime":1616079736396,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"neqwy5",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"24"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/index.js",[],["45","46"],"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/reportWebVitals.js",[],"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/App.js",["47"],"import React, {Component} from 'react';\nimport Navigation from './components/Navigation/Navigation';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport Rank from './components/Rank/Rank';\nimport Signin from './components/Signin/Signin';\nimport Register from './components/Register/Register';\nimport Particles from 'react-particles-js';\nimport Clarifai from 'clarifai';\nimport './App.css';\n\nconst particlesOptions = {\n  particles: {\n    number: {\n      value: 100,\n      density: {\n        enable: true,\n        value_area: 800\n      }\n    }\n  }\n}\n\nconst initialState = {\n  input:'',\n  imageUrl:'',//url應該要在點擊submit後顯示\n  box: {}, //include values we receive\n  route: 'signin',//從signin開始\n  isSignedIn: false,\n  user: {\n    id: '',\n    name: '',\n    email: '',\n    entries: 0, //記錄分數\n    joined: '' //自動建立日期 \n  }\n}\n\nclass App extends Component {\n  constructor(){//宣告state\n    super(); //呼叫parent 的constructor，很重要！！\n    this.state = initialState;//state為在App中改變的內容\n  }\n\n  loadUser = (data) => {\n    //update user that we receive\n    this.setState({user: {\n      id: data.id,\n      name: data.name,\n      email: data.email,\n      entries: data.entries, \n      joined: data.joined \n    }})\n  }\n\n  //這個function會return object\n  claculateFaceLocation = (data) =>{\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return{\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - (clarifaiFace.right_col * width),\n      bottomRow: height - (clarifaiFace.bottom_row * height)\n    }\n  }\n\n  //receive claculateFaceLocation's return value\n  displayFaceBox = (box) =>{\n    //state(box) set with box\n    this.setState({box: box});\n  }\n\n  onInputChange = (event) =>{\n    //update input component\n    this.setState({input : event.target.value});//拿value\n  }\n\n  onButtonSubmit = () =>{\n    //當imageUrl拿到input後會update\n    //pass imageUrl to FaceRecognition\n    this.setState({imageUrl:this.state.input});\n      fetch('https://lit-depths-96413.herokuapp.com/imageurl', {//用來在前端隱藏api key，移到後端做\n        method: 'post',\n        headers: {'Content-type': 'application/json'},\n        body: JSON.stringify({\n          input: this.state.input\n        })\n      })\n      .then(response => response.json())//因為是fetch，所以要做response.json()\n      .then(response => {\n        if(response){\n          fetch('https://lit-depths-96413.herokuapp.com/image', {\n            method: 'put',\n            //header is object\n            headers: {'Content-type': 'application/json'},\n            //object所以要包json\n            body: JSON.stringify({\n              id: this.state.user.id\n            })\n          })\n            .then(response => response.json())\n            .then(count => {\n              //update count\n              this.setState(Object.assign(this.state.user, {entries: count}))\n            })\n            .catch(console.log)//error handling\n        }\n        this.displayFaceBox(this.claculateFaceLocation(response))\n      })\n      .catch(err => console.log(err));\n  }\n\n  //當有人signin之後進入home頁面\n  onRouteChange = (route) => {\n    if(route ==='signout'){\n      this.setState(initialState)\n    }\n    else if(route ==='home'){\n      this.setState({isSignedIn: true})\n    }\n    this.setState({route: route});\n  }\n\n  render(){\n    const {isSignedIn, route, box, imageUrl} = this.state;\n    return (\n      <div className=\"App\">\n        <Particles className='particles'\n            params={particlesOptions}\n          />\n        <Navigation isSignedIn={isSignedIn} onRouteChange={this.onRouteChange} />\n        { route ==='home' \n          //click之後，route會變成signin\n          //html用{}包起來就會變成js格式\n          ? <div>\n              <Logo />\n              <Rank name={this.state.user.name} entries={this.state.user.entries}/>\n              <ImageLinkForm \n                onInputChange = {this.onInputChange} \n                onButtonSubmit={this.onButtonSubmit}\n              />\n              <FaceRecognition box={box} imageUrl={imageUrl}/>\n            </div>\n          :(\n            this.state.route === 'signin'\n            ? <Signin loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n            : <Register loadUser={this.loadUser} onRouteChange={this.onRouteChange} />\n            ) \n        } \n      </div> \n    );\n  }\n  \n}\n\nexport default App;\n","/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Navigation/Navigation.js",[],"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Logo/Logo.js",[],["48","49"],"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/ImageLinkForm/ImageLinkForm.js",[],"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Rank/Rank.js",[],"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/FaceRecognition/FaceRecognition.js",[],"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Signin/Signin.js",[],"/Users/shihlei/Documents/Web Development/facerecognitionbrain/src/components/Register/Register.js",[],{"ruleId":"50","replacedBy":"51"},{"ruleId":"52","replacedBy":"53"},{"ruleId":"54","severity":1,"message":"55","line":10,"column":8,"nodeType":"56","messageId":"57","endLine":10,"endColumn":16},{"ruleId":"50","replacedBy":"58"},{"ruleId":"52","replacedBy":"59"},"no-native-reassign",["60"],"no-negated-in-lhs",["61"],"no-unused-vars","'Clarifai' is defined but never used.","Identifier","unusedVar",["60"],["61"],"no-global-assign","no-unsafe-negation"]